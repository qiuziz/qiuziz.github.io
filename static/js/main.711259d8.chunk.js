(this["webpackJsonp_qiuz.github"]=this["webpackJsonp_qiuz.github"]||[]).push([[0],{172:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},389:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),o=n.n(l),c=(n(172),n(59)),i=n(18),u=(n(173),n(113)),s=n.n(u),m=(n(182),n(167)),d=n.n(m),h=(n(184),n(112)),p=n.n(h),f=(n(185),n(163)),y=n.n(f),g=n(47),b=n(48),v=n(50),k=n(49),E=n(51),C=(n(187),n(52)),O=n.n(C),S=(n(189),n(397)),j=n(166),M=n(396),w=(n(190),function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={icon:"arrows-alt",count:100,visible:!1},n}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"headerbar"},r.a.createElement("div",{style:{lineHeight:"64px",float:"right"}},r.a.createElement("ul",{className:"header-ul"})))}}]),t}(a.Component)),K=(n(90),n(39)),I=n.n(K),L=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={openKeys:[],selectedKeys:["4"],defaultNodeList:[]},n.handleClick=function(e){console.log("click ",e),n.setState({selectedKeys:["".concat(e.key)]}),n.props.onSelect("".concat(e.key))},n}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.state,t=(e.openKeys,e.selectedKeys);return r.a.createElement(I.a,{theme:"dark",mode:"horizontal",onClick:this.handleClick,selectedKeys:t},this.props.menus&&this.props.menus.map((function(e){return r.a.createElement(I.a.Item,{key:e.key},e.name)})))}}]),t}(r.a.Component),N=(Object(i.f)(L),I.a.SubMenu,function(e){function t(){var e,n,a;Object(g.a)(this,t);for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];return(a=Object(v.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={openKeys:[],selectedKeys:[null!==(n=a.props.current)&&void 0!==n?n:"47"],defaultNodeList:[]},a.onOpenChange=function(e){console.info("openKeys:",e),a.setState({openKeys:e})},a.renderMenuItem=function(e){return r.a.createElement(I.a.Item,{key:e.key,onClick:function(){return a.viewContent(e)}},r.a.createElement("span",null,e.title))},a.renderSubMenu=function(e){return r.a.createElement(I.a.SubMenu,{key:e.key,title:r.a.createElement("span",null,r.a.createElement("span",null,e.title))},e.children&&e.children.map((function(e){return e.children&&e.children.length>0?a.renderSubMenu(e):a.renderMenuItem(e)})))},a.viewContent=function(e){console.log(e),e.url&&window.history.pushState("","",e.url)},a.handleMenuClick=function(e){a.setState({selectedKeys:[e]});var t=P(a.props.menus,e);a.props.onMenuChange(t)},a}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.menus!==this.props.menus){var t=P(e.menus,this.state.selectedKeys[0]);this.setState({openKeys:t.slice(0,-1).map((function(e){return e.key.toString()}))})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.openKeys,a=t.selectedKeys;return r.a.createElement(I.a,{mode:"inline",onOpenChange:this.onOpenChange,onClick:function(t){var n=t.key;return e.handleMenuClick(n)},openKeys:n,selectedKeys:a,style:{height:"100%"}},this.props.menus&&this.props.menus.map((function(t){return t.children&&t.children.length>0?e.renderSubMenu(t):e.renderMenuItem(t)})))}}]),t}(r.a.Component)),P=function(e,t){var n=[];return function e(t,a,r){var l=!1,o=!0,c=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var m=u.value;if(m.key==a)return r.push(m),n=r,!0;if(m.children&&m.children.length){if(r.push(m),l=e(m.children,a,r))break;r.pop()}}}catch(d){c=!0,i=d}finally{try{o||null==s.return||s.return()}finally{if(c)throw i}}return l}(e,t,[]),n},x=Object(i.f)(N),A=[{id:1,key:1,title:"Blog",url:"/q/blog/",entry:"/blog/"},{id:2,key:2,title:"React Image Map",url:"/q/react-image-map/",entry:"/react-image-map/"}],q=O.a.Header,F=O.a.Sider,_=O.a.Content,z=O.a.Footer,B="last_selected_menu",R=function(e){function t(e){var n;Object(g.a)(this,t),(n=Object(v.a)(this,Object(k.a)(t).call(this,e))).toggle=function(){n.setState({collapsed:!n.state.collapsed})},n.genActiveRule=function(e){return function(t){return t.pathname.startsWith(e)}},n.handleClick=function(e){console.log("click ",e),n.setState({current:e.key})},n.getSubTree=function(){var e=n.state.current,t=null;return n.state.menu.forEach((function(n){n.key===e&&(t=n.children)})),t},n.getMenuQuery=function(){console.log("\u6267\u884c");var e=A;n.setState({menu:n.filterVisibleMenu(e)}),n.state.current&&n.handleMenuChange(P(e,n.state.current))},n.filterVisibleMenu=function(e){var t=[],a=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var i=o.value;[2,3].includes(i.authority_type)||(t.push(i),i.children&&(i.children=n.filterVisibleMenu(i.children)))}}catch(u){r=!0,l=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw l}}return t},n.handleMenuChange=function(e){n.setState({currentMenuPaths:e}),e.length&&localStorage.setItem(B,e[e.length-1].key)};var a=localStorage.getItem(B);return n.state={current:null!==a&&void 0!==a?a:"47",loading:!1,collapsed:!1,subLoader:null,menu:[],subAppList:[],currentMenuPaths:[]},n}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=function(e){var t=document.getElementById("subapp-container");o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{style:{position:"absolute",top:"50%",left:"calc(50% + 100px)"},spinning:e}),r.a.createElement("div",{id:"subapp-viewport"})),t)},t=A.map((function(t){return{name:t.title,entry:"//".concat(window.location.host).concat(t.entry),container:"#subapp-viewport",loader:e,activeRule:t.url}}));this.setState({loading:!0,subLoader:e,subAppList:t}),Object(S.b)(t,{beforeLoad:[function(e){return new Promise((function(t,n){console.log("[LifeCycle] before load %c%s","color: green;",e.name),t(e.name)}))}],beforeMount:[function(e){return new Promise((function(t,n){console.log("[LifeCycle] before mount %c%s","color: green;",e.name),t(e.name)}))}],afterUnmount:[function(e){return new Promise((function(t,n){console.log("[LifeCycle] after unmount %c%s","color: green;",e.name),t(e.name)}))}]});var n=Object(j.b)({user:"qiankun"}),a=n.onGlobalStateChange,l=n.setGlobalState;a((function(e,t){return console.log("[onGlobalStateChange - master]:",e,t)})),l({ignore:"master",user:{name:"master"}}),Object(S.c)({sandbox:{experimentalStyleIsolation:!0}}),this.getMenuQuery(),Object(M.a)((function(){console.log("[MainApp] first app mounted")}))}},{key:"render",value:function(){var e=this.state,t=e.menu;e.current,e.subLoader,this.getSubTree();return r.a.createElement(c.a,null,r.a.createElement(O.a,{className:"widgets-layout"},r.a.createElement(q,{className:"header"},r.a.createElement("div",{className:"logo"},"Widgets"),r.a.createElement(d.a,{justify:"space-around"},r.a.createElement(p.a,{xs:{span:20},lg:{span:20}}),r.a.createElement(p.a,{xs:{span:24},lg:{span:4}},r.a.createElement(w,null)))),r.a.createElement(O.a,{className:"widgets-layout-content"},r.a.createElement(F,{width:200,collapsed:this.state.collapsed,onCollapse:this.state.collapsed},r.a.createElement(x,{menus:t,current:this.state.current,onMenuChange:this.handleMenuChange})),r.a.createElement(O.a,{className:"widgets-layout-container"},r.a.createElement(s.a,{className:"widgets-layout-container-breadcrumd"},this.state.currentMenuPaths.map((function(e){return r.a.createElement(s.a.Item,{key:e.id},e.title)}))),r.a.createElement(_,{className:"site-layout-background"},r.a.createElement("div",{id:"subapp-container",className:"view"})),r.a.createElement(z,{className:"widgets-layout-container-footer"},"Widgets \xa92021 Created by qiuz")))))}}]),t}(a.Component),T=function(){return r.a.createElement(c.a,{basename:"/"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"*",component:R})))},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,398)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,l=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),l(e),o(e)}))};o.a.render(r.a.createElement(T,null),document.getElementById("root")),W()}},[[389,1,2]]]);
//# sourceMappingURL=main.711259d8.chunk.js.map